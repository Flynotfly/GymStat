{% extends 'base.html' %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Training</title>
</head>
<body>
{% block content %}
    <h1>Training Form</h1>
    <form id="training-form" method="post" action="{% url 'training:create' %}" onsubmit="submitForm(event)">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Save</button>
    </form>
{% endblock %}

{% block include_js %}
	async function submitForm(event) {
        event.preventDefault();
        const form = event.target;
        const formData = new FormData(form);

        const response = await fetch(form.action, {
            method: form.method,
            body: formData,
        });

        const result = await response.json();

        if (result.success) {
            alert('Object saved successfully! ID: ' + result.id);
            form.reset();
        } else {
            alert('Error: ' + JSON.stringify(result.errors));
        }
    }
{% endblock %}
</body>
</html>